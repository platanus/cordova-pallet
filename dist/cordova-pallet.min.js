!function(){"use strict";angular.module("platanus.cordovaPallet",["ngCordova"])}();
!function(){"use strict";angular.module("platanus.cordovaPallet").constant("trashIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAqCAQAAADhEEisAAAAAmJLR0QA/4eP\nzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQffCRQUHjb9AwcJAAAB\nwElEQVRIx+3Wv2sUQRQH8M/snZ4iiWIUsVJQbCJCasH8Cf5ABEGwsrBQ0MbO\nRgT/CAU7CVhY2QiKcAixEQvBKiBGLnB3CRHPQO4ua+He7a7snndaiXkDM7xh\nvvPefvc784Yim/ZEUztpLXUnC9cJhbP3XdPSy6xacrZoYbUQ/tK7DBj6grg8\n+l6zapn5eESmfUuW06ld7rmqom98q7vlE0HkqTPaNgojllnFd+esRC6a19AR\nJ/DR/WDsqblJ5Lz2LzSNa/Oiqude2/JnVv3J5ox9EwI3fU7/+23XJyKOj06n\n8FhDdyJ4I6+6WCwW+E2feiDK7dm1YDHjL1rIZLXi8UBtxZp/5oGKV6bAmht6\ndrgwPEh1dY+yLEU5la+jP+Tjmx62VBNJreOrqaHAcvCQEWTWD0lL8814kb+y\naukRjUuPb+G3hxH3UCjztpPfTv5/S/6fpm5SeCiDxziGgw4l/oz9mE2qAMdx\nKqkIud3uuqQrFqw6qqaZFIMNkROW9ZMt2uas6eCDK2n0t8McDtjUGnq7Tfsy\nfHVEDmvqgPfZ6MFDcxMwsOqyZnqn88IeR+wcA9r1xp1BiQw5GmtjwTNvkR//\nn52kKbQ1VwAAAABJRU5ErkJggg==\n")}();
!function(){function e(e,o,n,a){function t(t,l,r,i){function c(){return["upload-btn",t.buttonClasses].join(" ")}function s(){return t.buttonLabel||"Select file..."}function u(){return!i.$viewValue}function p(){(t.removeCallback||angular.noop)(),f(null)}function d(e){var o=JSON.parse(e.response),n=o.upload||o,a={localFileName:P,loaded:1,total:1};f(n.identifier),n.localFileName=P,(t.progressCallback||angular.noop)({event:a}),(t.successCallback||angular.noop)({uploadData:n})}function m(e){var o={localFileName:P,loaded:1,total:1},n={localFileName:P,error:e.exception,status:e.http_status};(t.progressCallback||angular.noop)({event:o}),(t.errorCallback||angular.noop)({errorData:n})}function b(e){var o={localFileName:P,loaded:.95*e.loaded,total:e.total};(t.progressCallback||angular.noop)({event:o})}function g(){f(null),(t.initCallback||angular.noop)()}function f(e){return e?void i.$setViewValue(e):void i.$setViewValue(null)}function v(e){if(!(e instanceof Object))throw new Error("Mode data needs to be json");if(!e.name)throw new Error("Missing name attribute");if(-1===I.indexOf(e.name))throw new Error("Invalid name attribute");e.options||(e.options={});var o={name:e.name,label:"Unknown",options:{}};return o.name===E?(o.label=e.label?e.label:"Camera",o.options.destinationType=Camera.DestinationType.FILE_URI,o.options.sourceType=Camera.PictureSourceType.CAMERA,o.options.encodingType=e.options.hasOwnProperty("encodingType")?e.options.encodingType:Camera.EncodingType.JPEG,o.options.saveToPhotoAlbum=e.options.hasOwnProperty("saveToPhotoAlbum")?e.options.saveToPhotoAlbum:!0,o.options.correctOrientation=e.options.hasOwnProperty("correctOrientation")?e.options.correctOrientation:!0):o.name===O&&(o.label=e.label?e.label:"Gallery",o.options.destinationType=Camera.DestinationType.FILE_URI,o.options.sourceType=Camera.PictureSourceType.PHOTOLIBRARY,o.options.encodingType=e.options.hasOwnProperty("encodingType")?e.options.encodingType:Camera.EncodingType.JPEG),o}function C(){var e=[];if(!(t.modes&&t.modes instanceof Array))return e.push(v({name:O})),e;var o,n=t.modes.length;for(o=0;n>o;o++)e.push(v(t.modes[o]));return e}function h(e){n.getPicture(e.options).then(function(e){g(),o.upload(t.uploadUrl,e,{mimeType:"image/jpeg",fileName:P}).then(d,m,b)},function(e){console.error(e)})}function y(e){var o,n=[],a=e.length;for(o=0;a>o;o++)n.push(e[o].label);return n}function T(e){var o={title:"Get file from...",buttonLabels:y(e),addCancelButtonWithLabel:"Cancel",androidEnableCancelButton:!0};a.show(o).then(function(o){o-=1,o!==e.length&&k(e[o])})}function k(e){switch(e.name){case O:case E:h(e)}}function w(){var e=C();e.length>1?T(e):k(e[0])}var P="image.jpg",O="gallery",E="camera",I=[O,E];t.onUploadButtonClick=w,t.getButtonLabel=s,t.onRemoveUpload=p,t.emptyIdentifier=u,t.trashIcon=e,t.getButtonClasses=c}var l={template:'<div class="pallet-file-selector"><button class="{{ getButtonClasses() }}" ng-click="onUploadButtonClick()">{{ getButtonLabel() }}</button><img class="remove-btn" ng-src="{{ trashIcon }}" ng-click="onRemoveUpload()" ng-hide="emptyIdentifier()" /></div>',require:"ngModel",replace:!0,scope:{uploadUrl:"@",buttonClasses:"@",buttonLabel:"@",modes:"=",initCallback:"&",successCallback:"&",progressCallback:"&",errorCallback:"&",removeCallback:"&",doneCallback:"&"},link:t};return l}angular.module("platanus.cordovaPallet").directive("palletFileSelector",e),e.$inject=["trashIcon","$cordovaFileTransfer","$cordovaCamera","$cordovaActionSheet"]}();