!function(){"use strict";angular.module("platanus.cordovaPallet",["ngCordova"])}();
!function(){"use strict";angular.module("platanus.cordovaPallet").constant("trashIcon","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAqCAQAAADhEEisAAAAAmJLR0QA/4eP\nzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQffCRQUHjb9AwcJAAAB\nwElEQVRIx+3Wv2sUQRQH8M/snZ4iiWIUsVJQbCJCasH8Cf5ABEGwsrBQ0MbO\nRgT/CAU7CVhY2QiKcAixEQvBKiBGLnB3CRHPQO4ua+He7a7snndaiXkDM7xh\nvvPefvc784Yim/ZEUztpLXUnC9cJhbP3XdPSy6xacrZoYbUQ/tK7DBj6grg8\n+l6zapn5eESmfUuW06ld7rmqom98q7vlE0HkqTPaNgojllnFd+esRC6a19AR\nJ/DR/WDsqblJ5Lz2LzSNa/Oiqude2/JnVv3J5ox9EwI3fU7/+23XJyKOj06n\n8FhDdyJ4I6+6WCwW+E2feiDK7dm1YDHjL1rIZLXi8UBtxZp/5oGKV6bAmht6\ndrgwPEh1dY+yLEU5la+jP+Tjmx62VBNJreOrqaHAcvCQEWTWD0lL8814kb+y\naukRjUuPb+G3hxH3UCjztpPfTv5/S/6fpm5SeCiDxziGgw4l/oz9mE2qAMdx\nKqkIud3uuqQrFqw6qqaZFIMNkROW9ZMt2uas6eCDK2n0t8McDtjUGnq7Tfsy\nfHVEDmvqgPfZ6MFDcxMwsOqyZnqn88IeR+wcA9r1xp1BiQw5GmtjwTNvkR//\nn52kKbQ1VwAAAABJRU5ErkJggg==\n")}();
!function(){function e(e,a,o){function l(l,n,t,r){function c(){return["upload-btn",l.buttonClasses].join(" ")}function i(){return l.buttonLabel||"Select file..."}function u(){return!r.$viewValue}function s(){(l.removeCallback||angular.noop)(),f(null)}function p(e){var a=JSON.parse(e.response),o=a.upload||a,n={localFileName:k,loaded:1,total:1};f(o.identifier),o.localFileName=k,(l.progressCallback||angular.noop)({event:n}),(l.successCallback||angular.noop)({uploadData:o})}function d(e){var a={localFileName:k,loaded:1,total:1},o={localFileName:k,error:e.exception,status:e.http_status};(l.progressCallback||angular.noop)({event:a}),(l.errorCallback||angular.noop)({errorData:o})}function m(e){var a={localFileName:k,loaded:.95*e.loaded,total:e.total};(l.progressCallback||angular.noop)({event:a})}function g(){f(null),(l.initCallback||angular.noop)()}function f(e){return e?void r.$setViewValue(e):void r.$setViewValue(null)}function v(){var e=[];if(!(l.modes&&l.modes instanceof Array))return e.push(T[0]),e;var a,o,n=l.modes.length;for(o=0;n>o;o++)a=l.modes[o],-1!==T.indexOf(a)&&e.push(a);return e}function b(e){var n=Camera.PictureSourceType.PHOTOLIBRARY;e===y&&(n=Camera.PictureSourceType.CAMERA);var t={destinationType:Camera.DestinationType.FILE_URI,sourceType:n,encodingType:Camera.EncodingType.JPEG,saveToPhotoAlbum:!0,correctOrientation:!0};o.getPicture(t).then(function(e){g(),a.upload(l.uploadUrl,e,{mimeType:"image/jpeg",fileName:k}).then(p,d,m)},function(e){console.error(e)})}function C(){var e=v();if(e.length>1)console.info("TODO: open mode selector");else{var a=e[0];switch(a){case h:case y:b(a)}}}var k="image.jpg",h="gallery",y="camera",T=[h,y];l.onUploadButtonClick=C,l.getButtonLabel=i,l.onRemoveUpload=s,l.emptyIdentifier=u,l.trashIcon=e,l.getButtonClasses=c}var n={template:'<div class="pallet-file-selector"><button class="{{ getButtonClasses() }}" ng-click="onUploadButtonClick()">{{ getButtonLabel() }}</button><img class="remove-btn" ng-src="{{ trashIcon }}" ng-click="onRemoveUpload()" ng-hide="emptyIdentifier()" /></div>',require:"ngModel",replace:!0,scope:{uploadUrl:"@",buttonClasses:"@",buttonLabel:"@",modes:"=",initCallback:"&",successCallback:"&",progressCallback:"&",errorCallback:"&",removeCallback:"&",doneCallback:"&"},link:l};return n}angular.module("platanus.cordovaPallet").directive("palletFileSelector",e),e.$inject=["trashIcon","$cordovaFileTransfer","$cordovaCamera"]}();